<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Home Control System ‚Äî Team 34</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #070b14;
  --surface: #0e1422;
  --card: #131929;
  --card2: #1a2238;
  --accent: #38bdf8;
  --accent2: #818cf8;
  --green: #34d399;
  --red: #f87171;
  --orange: #fb923c;
  --yellow: #fbbf24;
  --text: #e2e8f0;
  --muted: #64748b;
  --border: rgba(255,255,255,0.07);
  --shadow: 0 8px 32px rgba(0,0,0,0.5);
}
* { margin:0; padding:0; box-sizing:border-box; }
body {
  background:var(--bg); color:var(--text);
  font-family:'Inter',sans-serif;
  min-height:100vh; display:flex; overflow:hidden;
}
body::before {
  content:''; position:fixed; inset:0;
  background:
    radial-gradient(ellipse 60% 50% at 80% -10%, rgba(56,189,248,.12), transparent),
    radial-gradient(ellipse 50% 40% at -10% 80%, rgba(129,140,248,.1), transparent);
  pointer-events:none; z-index:0;
}

/* LOGIN */
#loginScreen {
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background:var(--bg); z-index:1000; animation:fadeIn .4s ease;
}
.login-box {
  background:var(--card); border:1px solid var(--border); border-radius:24px;
  padding:48px; width:420px; box-shadow:var(--shadow); text-align:center;
}
.login-logo {
  width:64px; height:64px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border-radius:18px; display:grid; place-items:center; font-size:28px;
  margin:0 auto 20px; box-shadow:0 0 32px rgba(56,189,248,.3);
}
.login-box h2 { font-size:22px; font-weight:700; margin-bottom:4px; }
.login-box p  { color:var(--muted); font-size:13px; margin-bottom:32px; }
.input-group { margin-bottom:16px; text-align:left; }
.input-group label { font-size:12px; color:var(--muted); display:block; margin-bottom:6px; }
.input-group input {
  width:100%; padding:12px 16px;
  background:var(--card2); border:1px solid var(--border);
  border-radius:12px; color:var(--text); font-family:inherit; font-size:14px;
  outline:none; transition:border-color .2s;
}
.input-group input:focus { border-color:var(--accent); }
.btn-login {
  width:100%; padding:14px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border:none; border-radius:12px; color:white; font-size:15px; font-weight:600;
  cursor:pointer; font-family:inherit; margin-top:8px; transition:opacity .2s,transform .2s;
}
.btn-login:hover { opacity:.9; transform:translateY(-1px); }
.login-hint { margin-top:20px; font-size:12px; color:var(--muted); }

/* SIDEBAR */
#sidebar {
  width:240px; min-height:100vh; background:var(--surface);
  border-right:1px solid var(--border); display:flex; flex-direction:column;
  position:relative; z-index:10; flex-shrink:0;
}
.sidebar-logo { padding:24px 20px 20px; border-bottom:1px solid var(--border); }
.logo-row { display:flex; align-items:center; gap:12px; }
.logo-icon {
  width:38px; height:38px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  border-radius:10px; display:grid; place-items:center; font-size:18px;
  box-shadow:0 0 16px rgba(56,189,248,.3);
}
.logo-text h3 { font-size:14px; font-weight:700; }
.logo-text span { font-size:11px; color:var(--muted); }
.online-pill {
  margin-top:12px; display:flex; align-items:center; gap:6px;
  background:rgba(52,211,153,.1); border:1px solid rgba(52,211,153,.2);
  border-radius:50px; padding:5px 12px; font-size:11px; color:var(--green);
}
.pulse { width:6px; height:6px; background:var(--green); border-radius:50%; animation:pulse 2s infinite; }
nav { padding:16px 12px; flex:1; }
.nav-section { font-size:10px; color:var(--muted); text-transform:uppercase; letter-spacing:1px; padding:0 8px; margin:12px 0 6px; }
.nav-item {
  display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px;
  cursor:pointer; transition:all .2s; color:var(--muted); font-size:13px; margin-bottom:2px; position:relative;
}
.nav-item:hover { background:rgba(255,255,255,.04); color:var(--text); }
.nav-item.active {
  background:linear-gradient(135deg,rgba(56,189,248,.15),rgba(129,140,248,.15));
  color:var(--accent); border:1px solid rgba(56,189,248,.2);
}
.nav-item .icon { font-size:16px; width:20px; text-align:center; }
.badge { margin-left:auto; background:var(--red); border-radius:50px; padding:1px 7px; font-size:10px; color:white; font-weight:600; }
.sidebar-bottom { padding:16px; border-top:1px solid var(--border); }
.user-row { display:flex; align-items:center; gap:10px; padding:10px; border-radius:10px; cursor:pointer; transition:background .2s; }
.user-row:hover { background:rgba(255,255,255,.04); }
.avatar {
  width:34px; height:34px; border-radius:10px;
  background:linear-gradient(135deg,var(--accent),var(--accent2));
  display:grid; place-items:center; font-size:14px; font-weight:700; color:white;
}
.user-info { flex:1; }
.user-name { font-size:13px; font-weight:600; }
.user-role { font-size:11px; color:var(--muted); }

/* MAIN */
#main { flex:1; display:flex; flex-direction:column; overflow:hidden; position:relative; z-index:1; }
.topbar {
  display:flex; align-items:center; justify-content:space-between;
  padding:16px 28px; border-bottom:1px solid var(--border);
  background:rgba(7,11,20,.8); backdrop-filter:blur(12px);
}
.page-title { font-size:18px; font-weight:700; }
.page-sub { font-size:12px; color:var(--muted); margin-top:2px; }
.topbar-right { display:flex; align-items:center; gap:12px; }
.chip {
  background:var(--card); border:1px solid var(--border);
  border-radius:50px; padding:6px 14px; font-size:12px; display:flex; align-items:center; gap:6px;
}
.alert-bell {
  width:36px; height:36px; background:var(--card); border:1px solid var(--border);
  border-radius:10px; display:grid; place-items:center; cursor:pointer; font-size:16px;
  position:relative; transition:border-color .2s;
}
.alert-bell:hover { border-color:var(--accent); }
.alert-bell .notif {
  position:absolute; top:6px; right:6px;
  width:8px; height:8px; background:var(--red); border-radius:50%; border:1.5px solid var(--bg);
}
#content { flex:1; overflow-y:auto; padding:24px 28px; }

.page { display:none; animation:fadeIn .3s ease; }
.page.active { display:block; }
@keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:translateY(0)} }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(.8)} }

/* STATS */
.stats-row { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:24px; }
.stat {
  background:var(--card); border:1px solid var(--border); border-radius:16px; padding:18px 20px;
  position:relative; overflow:hidden; transition:transform .2s;
}
.stat:hover { transform:translateY(-2px); }
.stat::before {
  content:''; position:absolute; top:0; left:0; right:0; height:2px;
  background:linear-gradient(90deg,transparent,var(--c,var(--accent)),transparent);
}
.stat-label { font-size:11px; color:var(--muted); text-transform:uppercase; letter-spacing:.8px; margin-bottom:10px; }
.stat-val { font-size:26px; font-weight:700; color:var(--c,var(--accent)); line-height:1; }
.stat-unit { font-size:12px; color:var(--muted); margin-top:4px; }
.stat-icon { position:absolute; top:14px; right:14px; font-size:22px; opacity:.12; }

/* PANEL */
.panel { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:20px; }
.panel-title { font-size:14px; font-weight:600; margin-bottom:16px; }

/* DEVICES */
.devices-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; }
.dev-card {
  background:var(--card2); border:1px solid var(--border); border-radius:14px; padding:16px;
  cursor:pointer; transition:all .25s; position:relative; overflow:hidden;
}
.dev-card:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,.4); }
.dev-card.on { border-color:rgba(56,189,248,.35); background:linear-gradient(135deg,var(--card2),rgba(56,189,248,.07)); }
.dev-card.on::after {
  content:''; position:absolute; inset:0;
  background:radial-gradient(circle at top right,rgba(56,189,248,.1),transparent 60%); pointer-events:none;
}
.dev-top { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:12px; }
.dev-emoji { font-size:26px; }
.dev-name { font-size:13px; font-weight:600; margin-bottom:3px; }
.dev-status { font-size:11px; color:var(--muted); }
.dev-status.on { color:var(--green); }
.tog {
  width:38px; height:20px; border-radius:20px;
  background:var(--card); border:1px solid rgba(255,255,255,.1);
  position:relative; cursor:pointer; transition:all .3s; flex-shrink:0;
}
.tog.on { background:linear-gradient(90deg,var(--accent),var(--accent2)); border-color:transparent; box-shadow:0 0 10px rgba(56,189,248,.4); }
.tog-thumb { position:absolute; top:2px; left:2px; width:14px; height:14px; border-radius:50%; background:white; transition:left .3s; box-shadow:0 1px 3px rgba(0,0,0,.3); }
.tog.on .tog-thumb { left:calc(100% - 16px); }
.dev-slider { margin-top:10px; }
.slider-row { display:flex; justify-content:space-between; font-size:10px; color:var(--muted); margin-bottom:5px; }
input[type=range] { width:100%; -webkit-appearance:none; height:3px; border-radius:3px; background:var(--card); outline:none; cursor:pointer; }
input[type=range]::-webkit-slider-thumb { -webkit-appearance:none; width:12px; height:12px; border-radius:50%; background:var(--accent); box-shadow:0 0 6px rgba(56,189,248,.5); }

/* SENSORS */
.sensors-grid { display:grid; grid-template-columns:repeat(2,1fr); gap:14px; }
.sensor-card { background:var(--card2); border:1px solid var(--border); border-radius:14px; padding:16px; }
.sensor-top { display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.sensor-lbl { font-size:11px; color:var(--muted); }
.sensor-val { font-size:28px; font-weight:700; }
.sensor-unit { font-size:12px; color:var(--muted); }
.status-badge { display:inline-flex; align-items:center; gap:5px; border-radius:50px; padding:4px 12px; font-size:11px; font-weight:600; }
.status-badge.ok     { background:rgba(52,211,153,.12); color:var(--green);  border:1px solid rgba(52,211,153,.25); }
.status-badge.warn   { background:rgba(251,191,36,.12);  color:var(--yellow); border:1px solid rgba(251,191,36,.25); }
.status-badge.danger { background:rgba(248,113,113,.12); color:var(--red);    border:1px solid rgba(248,113,113,.25); }

/* ALERTS */
.alert-item { display:flex; align-items:flex-start; gap:12px; padding:14px; border-radius:12px; margin-bottom:10px; border:1px solid var(--border); background:var(--card2); transition:background .2s; }
.alert-item:hover { background:var(--card); }
.alert-icon { font-size:20px; flex-shrink:0; margin-top:1px; }
.alert-body { flex:1; }
.alert-title { font-size:13px; font-weight:600; margin-bottom:3px; }
.alert-time { font-size:11px; color:var(--muted); }
.alert-item.unread { border-left:3px solid var(--red); }
.alert-item.warn.unread { border-left-color:var(--yellow); }
.mark-btn { background:none; border:1px solid var(--border); border-radius:7px; padding:4px 10px; color:var(--muted); font-size:11px; cursor:pointer; font-family:inherit; transition:all .2s; flex-shrink:0; }
.mark-btn:hover { border-color:var(--accent); color:var(--accent); }

/* LOGS */
.log-table { width:100%; border-collapse:collapse; font-size:12px; }
.log-table th { text-align:left; padding:10px 14px; color:var(--muted); font-weight:500; font-size:11px; text-transform:uppercase; letter-spacing:.8px; border-bottom:1px solid var(--border); }
.log-table td { padding:12px 14px; border-bottom:1px solid rgba(255,255,255,.04); }
.log-table tr:hover td { background:rgba(255,255,255,.02); }
.log-type { display:inline-block; border-radius:6px; padding:2px 8px; font-size:10px; font-weight:600; }
.log-type.control { background:rgba(56,189,248,.12);  color:var(--accent); }
.log-type.sensor  { background:rgba(52,211,153,.12);  color:var(--green);  }
.log-type.alert   { background:rgba(248,113,113,.12); color:var(--red);    }
.log-type.access  { background:rgba(251,191,36,.12);  color:var(--yellow); }

/* SCHEDULER */
.schedule-item { display:flex; align-items:center; gap:14px; padding:14px; border-radius:12px; margin-bottom:10px; background:var(--card2); border:1px solid var(--border); }
.sched-time { font-size:18px; font-weight:700; color:var(--accent); min-width:60px; }
.sched-info { flex:1; }
.sched-name { font-size:13px; font-weight:600; margin-bottom:2px; }
.sched-days { font-size:11px; color:var(--muted); }
.sched-action { font-size:11px; color:var(--green); margin-top:2px; }

/* CAMERA */
.cam-view {
  aspect-ratio:16/9;
  background:repeating-linear-gradient(45deg,#0a0e1a 0,#0a0e1a 5px,#0e1422 5px,#0e1422 10px);
  display:flex; align-items:center; justify-content:center; position:relative;
}
.cam-overlay { position:absolute; top:8px; left:8px; display:flex; align-items:center; gap:4px; background:rgba(248,113,113,.9); border-radius:5px; padding:2px 7px; font-size:9px; font-weight:700; letter-spacing:.5px; }
.cam-dot { width:5px; height:5px; background:white; border-radius:50%; animation:pulse 1s infinite; }
.cam-label-bar { padding:16px 18px; display:flex; justify-content:space-between; align-items:center; }

/* FORM */
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:14px; }
.form-group { display:flex; flex-direction:column; gap:6px; }
.form-group label { font-size:11px; color:var(--muted); }
.form-group select, .form-group input { background:var(--card2); border:1px solid var(--border); border-radius:10px; padding:10px 14px; color:var(--text); font-family:inherit; font-size:13px; outline:none; transition:border-color .2s; }
.form-group select:focus, .form-group input:focus { border-color:var(--accent); }
.btn-add { background:linear-gradient(135deg,var(--accent),var(--accent2)); border:none; border-radius:10px; padding:10px 20px; color:white; font-family:inherit; font-size:13px; font-weight:600; cursor:pointer; transition:opacity .2s; }
.btn-add:hover { opacity:.85; }

/* HELPERS */
.sec-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; }
.sec-title { font-size:14px; font-weight:600; }
.sec-action { background:none; border:1px solid var(--border); border-radius:8px; padding:5px 12px; color:var(--muted); font-size:11px; cursor:pointer; font-family:inherit; transition:all .2s; }
.sec-action:hover { border-color:var(--accent); color:var(--accent); }
.grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
.mt16 { margin-top:16px; }
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen">
  <div class="login-box">
    <div class="login-logo">üè†</div>
    <h2>Smart Home System</h2>
    <p>King Abdulaziz University ‚Äî Team 34 ¬∑ EE499</p>
    <div class="input-group">
      <label>Username</label>
      <input type="text" id="loginUser" value="admin" placeholder="admin">
    </div>
    <div class="input-group">
      <label>Password</label>
      <input type="password" id="loginPass" value="1234" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    </div>
    <button class="btn-login" onclick="doLogin()">Sign In ‚Üí</button>
    <div class="login-hint">Demo credentials: admin / 1234</div>
  </div>
</div>

<!-- SIDEBAR -->
<div id="sidebar">
  <div class="sidebar-logo">
    <div class="logo-row">
      <div class="logo-icon">üè†</div>
      <div class="logo-text">
        <h3>Smart Home</h3>
        <span>Team 34 ‚Äî EE499</span>
      </div>
    </div>
    <div class="online-pill"><div class="pulse"></div>Connected to AWS Cloud</div>
  </div>
  <nav>
    <div class="nav-section">Main</div>
    <div class="nav-item active" onclick="goPage('overview',this)"><span class="icon">üìä</span> Overview</div>
    <div class="nav-section">Control</div>
    <div class="nav-item" onclick="goPage('control',this)"><span class="icon">üéõÔ∏è</span> Device Control</div>
    <div class="nav-item" onclick="goPage('scheduler',this)"><span class="icon">‚è∞</span> Automation Scheduler</div>
    <div class="nav-section">Monitoring</div>
    <div class="nav-item" onclick="goPage('monitoring',this)"><span class="icon">üì°</span> Sensor Monitoring</div>
    <div class="nav-item" onclick="goPage('cameras',this)"><span class="icon">üìπ</span> Camera (ESP32-CAM)</div>
    <div class="nav-section">Security</div>
    <div class="nav-item" onclick="goPage('alerts',this)"><span class="icon">üö®</span> Alerts <span class="badge" id="alertBadge">3</span></div>
    <div class="nav-item" onclick="goPage('logs',this)"><span class="icon">üìã</span> Event Logs</div>
  </nav>
  <div class="sidebar-bottom">
    <div class="user-row" onclick="doLogout()">
      <div class="avatar">A</div>
      <div class="user-info">
        <div class="user-name">Admin</div>
        <div class="user-role">Sign out ‚Ü©</div>
      </div>
    </div>
  </div>
</div>

<!-- MAIN -->
<div id="main">
  <div class="topbar">
    <div>
      <div class="page-title" id="pageTitle">Overview</div>
      <div class="page-sub">Cloud-Centric Architecture ¬∑ MQTT over TLS ¬∑ ESP32</div>
    </div>
    <div class="topbar-right">
      <div class="chip">üå°Ô∏è <span id="tempChip">22.0¬∞C Indoor</span></div>
      <div class="chip">‚ö° 4.2 kWh</div>
      <div class="alert-bell" onclick="goPage('alerts',null)">üîî<div class="notif"></div></div>
    </div>
  </div>

  <div id="content">

    <!-- OVERVIEW -->
    <div class="page active" id="page-overview">
      <div class="stats-row">
        <div class="stat" style="--c:var(--green)">
          <div class="stat-icon">üì±</div>
          <div class="stat-label">Active Devices</div>
          <div class="stat-val" id="activeDevCount">5</div>
          <div class="stat-unit">of 3 devices</div>
        </div>
        <div class="stat" style="--c:var(--accent)">
          <div class="stat-icon">üå°Ô∏è</div>
          <div class="stat-label">Temperature</div>
          <div class="stat-val">22¬∞</div>
          <div class="stat-unit">Indoor</div>
        </div>
        <div class="stat" style="--c:var(--yellow)">
          <div class="stat-icon">üî•</div>
          <div class="stat-label">Smoke Sensor</div>
          <div class="stat-val" style="font-size:18px;padding-top:4px">Safe</div>
          <div class="stat-unit">No alerts</div>
        </div>
        <div class="stat" style="--c:var(--red)">
          <div class="stat-icon">üö®</div>
          <div class="stat-label">Unread Alerts</div>
          <div class="stat-val">3</div>
          <div class="stat-unit">Need review</div>
        </div>
      </div>
      <div class="grid-2">
        <div>
          <div class="sec-header">
            <div class="sec-title">‚ö° Quick Devices</div>
            <button class="sec-action" onclick="goPage('control',null)">View All</button>
          </div>
          <div style="display:flex;flex-direction:column;gap:10px" id="quickDevices"></div>
        </div>
        <div>
          <div class="sec-header">
            <div class="sec-title">üì° Sensor Status</div>
            <button class="sec-action" onclick="goPage('monitoring',null)">Details</button>
          </div>
          <div class="sensors-grid" id="overviewSensors"></div>
        </div>
      </div>
      <div class="mt16">
        <div class="sec-header">
          <div class="sec-title">üö® Recent Alerts</div>
          <button class="sec-action" onclick="goPage('alerts',null)">All Alerts</button>
        </div>
        <div id="overviewAlerts"></div>
      </div>
    </div>

    <!-- CONTROL -->
    <div class="page" id="page-control">
      <div class="sec-header">
        <div class="sec-title">üéõÔ∏è Device Control ‚Äî ESP32 via MQTT</div>
        <button class="sec-action" onclick="allOff()">Turn All Off</button>
      </div>
      <div class="devices-grid" id="devicesGrid"></div>
    </div>

    <!-- SCHEDULER -->
    <div class="page" id="page-scheduler">
      <div class="grid-2" style="align-items:start">
        <div>
          <div class="sec-header"><div class="sec-title">‚è∞ Active Schedules</div></div>
          <div id="scheduleList"></div>
        </div>
        <div class="panel">
          <div class="panel-title">‚ûï Add New Schedule</div>
          <div class="form-row">
            <div class="form-group">
              <label>Device</label>
              <select id="sDevice"><option>Main Lights</option><option>Fan</option><option>Door Lock</option></select>
            </div>
            <div class="form-group">
              <label>Action</label>
              <select id="sAction"><option>Turn On</option><option>Turn Off</option></select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Time</label>
              <input type="time" id="sTime" value="07:00">
            </div>
            <div class="form-group">
              <label>Days</label>
              <select id="sDays"><option>Every Day</option><option>Weekdays</option><option>Weekends</option></select>
            </div>
          </div>
          <button class="btn-add" onclick="addSchedule()">Add Schedule</button>
        </div>
      </div>
    </div>

    <!-- MONITORING -->
    <div class="page" id="page-monitoring">
      <div class="sec-header">
        <div class="sec-title">üì° Sensor Readings ‚Äî Live Update</div>
        <div class="chip" style="font-size:11px">Latency: ‚â§5s ¬∑ MQTT</div>
      </div>
      <div class="sensors-grid" style="grid-template-columns:repeat(3,1fr)" id="allSensors"></div>
    </div>

    <!-- CAMERAS -->
    <div class="page" id="page-cameras">
      <div class="sec-header">
        <div class="sec-title">üìπ Camera ‚Äî ESP32-CAM Live Stream</div>
        <div class="chip" style="font-size:11px">ISO/IEC 14496 ¬∑ IEEE 802.11</div>
      </div>
      <div style="max-width:600px">
        <div style="background:var(--card2);border:1px solid var(--border);border-radius:16px;overflow:hidden">
          <div class="cam-view">
            <div style="font-size:54px;opacity:.1;position:absolute">üì∑</div>
            <div class="cam-overlay"><div class="cam-dot"></div>LIVE</div>
            <div style="position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 3px,rgba(56,189,248,.015) 3px,rgba(56,189,248,.015) 4px);pointer-events:none"></div>
            <div style="position:absolute;top:12px;right:12px;width:20px;height:20px;border-top:2px solid var(--accent);border-right:2px solid var(--accent);border-radius:0 4px 0 0"></div>
            <div style="position:absolute;top:12px;left:12px;width:20px;height:20px;border-top:2px solid var(--accent);border-left:2px solid var(--accent);border-radius:4px 0 0 0"></div>
            <div style="position:absolute;bottom:12px;right:12px;width:20px;height:20px;border-bottom:2px solid var(--accent);border-right:2px solid var(--accent);border-radius:0 0 4px 0"></div>
            <div style="position:absolute;bottom:12px;left:12px;width:20px;height:20px;border-bottom:2px solid var(--accent);border-left:2px solid var(--accent);border-radius:0 0 0 4px"></div>
          </div>
          <div class="cam-label-bar">
            <div>
              <div style="font-size:15px;font-weight:600">üö™ Main Door</div>
              <div style="font-size:11px;color:var(--muted);margin-top:3px">ESP32-CAM ¬∑ IEEE 802.11 ¬∑ ISO/IEC 14496</div>
            </div>
            <div style="display:flex;gap:8px">
              <button class="sec-action" style="font-size:11px" onclick="takeSS(event)">üì∏ Snapshot</button>
              <button class="btn-add" style="font-size:12px;padding:7px 16px" id="doorBtn" onclick="openDoor()">üîì Unlock Door</button>
            </div>
          </div>
        </div>
        <div class="panel" style="margin-top:14px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-size:13px;font-weight:600;margin-bottom:4px">Smart Lock Status</div>
              <div id="doorStatusTxt" style="font-size:12px;color:var(--green)">üîê Locked ‚Äî Secure</div>
            </div>
            <span class="status-badge ok" id="doorBadge">Locked</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ALERTS -->
    <div class="page" id="page-alerts">
      <div class="sec-header">
        <div class="sec-title">üö® Alerts ‚Äî Response ‚â§5 seconds</div>
        <button class="sec-action" onclick="markAllRead()">Mark All as Read</button>
      </div>
      <div id="alertsList"></div>
    </div>

    <!-- LOGS -->
    <div class="page" id="page-logs">
      <div class="sec-header">
        <div class="sec-title">üìã Event Logs ‚Äî Cloud Database</div>
        <div class="chip" style="font-size:11px">Entry Latency: ‚â§1s</div>
      </div>
      <div class="panel">
        <table class="log-table">
          <thead><tr><th>Time</th><th>Type</th><th>Device</th><th>Action</th><th>User</th></tr></thead>
          <tbody id="logsBody"></tbody>
        </table>
      </div>
    </div>

  </div>
</div>

<script>
const devices = [
  { id:0, name:'Main Lights', emoji:'üí°', on:true,  hasSlider:true,  sliderLabel:'Brightness', sliderVal:75, status:'75%',    pin:'GPIO2', istemp:false },
  { id:1, name:'Fan',         emoji:'üåÄ', on:true,  hasSlider:true,  sliderLabel:'Speed',      sliderVal:60, status:'60%',    pin:'GPIO4', istemp:false },
  { id:2, name:'Door Lock',   emoji:'üîê', on:true,  hasSlider:false, sliderLabel:'',           sliderVal:0,  status:'Locked', pin:'GPIO5', istemp:false },
];

const sensors = [
  { name:'Smoke Sensor',  emoji:'üî•', val:'0 ppm', unit:'Safe',     status:'ok' },
  { name:'Motion Sensor', emoji:'üèÉ', val:'None',  unit:'Motion',   status:'ok' },
  { name:'Main Door',     emoji:'üö™', val:'Locked',unit:'Deadbolt', status:'ok' },
];

const alerts = [
  { id:0, title:'üö® Unusual motion detected at the main door', time:'5 minutes ago',  type:'danger', read:false },
  { id:1, title:'üî• Slight temperature rise in kitchen',        time:'18 minutes ago', type:'warn',   read:false },
  { id:2, title:'üîê 3 failed door unlock attempts detected',    time:'25 minutes ago', type:'danger', read:false },
  { id:3, title:'‚úÖ Lights turned on automatically (schedule)', time:'2 hours ago',    type:'ok',     read:true  },
  { id:4, title:'üì° Brief Wi-Fi disconnection, reconnected',    time:'3 hours ago',    type:'warn',   read:true  },
];

const schedules = [
  { time:'07:00', device:'Main Lights', action:'Turn On',  days:'Every Day', on:true  },
  { time:'23:00', device:'Main Lights', action:'Turn Off', days:'Every Day', on:true  },
  { time:'22:30', device:'Door Lock',   action:'Lock',     days:'Every Day', on:false },
];

const logs = [
  { time:'10:42:15', type:'control', device:'Main Lights',     action:'Turned on (brightness 75%)',  user:'admin'    },
  { time:'10:38:02', type:'sensor',  device:'Motion Sensor',   action:'Motion detected',             user:'System'   },
  { time:'10:35:44', type:'alert',   device:'Main Door',       action:'Unauthorized access attempt', user:'System'   },
  { time:'10:20:10', type:'access',  device:'Door Lock',       action:'Unlocked',                    user:'admin'    },
  { time:'09:55:00', type:'control', device:'Fan',             action:'Turned on (speed 60%)',        user:'admin'    },
  { time:'09:30:00', type:'sensor',  device:'Smoke Sensor',    action:'Normal reading ‚Äî 0 ppm',       user:'System'   },
  { time:'08:00:00', type:'control', device:'Air Conditioner', action:'Turned on ‚Äî 22¬∞C',             user:'Schedule' },
  { time:'07:00:00', type:'control', device:'Main Lights',     action:'Auto turn on (scheduled)',    user:'Schedule' },
];

// LOGIN
function doLogin() {
  if (document.getElementById('loginUser').value==='admin' && document.getElementById('loginPass').value==='1234') {
    const s = document.getElementById('loginScreen');
    s.style.transition='opacity .3s'; s.style.opacity='0';
    setTimeout(()=>s.style.display='none', 300);
    render();
  } else {
    const p = document.getElementById('loginPass');
    p.style.borderColor='var(--red)'; setTimeout(()=>p.style.borderColor='',1500);
  }
}
function doLogout() {
  const s=document.getElementById('loginScreen'); s.style.display='flex'; s.style.opacity='0';
  requestAnimationFrame(()=>{ s.style.transition='opacity .3s'; s.style.opacity='1'; });
}

// NAV
const titles={overview:'Overview',control:'Device Control',scheduler:'Automation Scheduler',monitoring:'Sensor Monitoring',cameras:'Camera (ESP32-CAM)',alerts:'Alerts',logs:'Event Logs'};
function goPage(id,el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  if(el) el.classList.add('active');
  else document.querySelectorAll('.nav-item').forEach(n=>{ if((n.getAttribute('onclick')||'').includes("'"+id+"'")) n.classList.add('active'); });
  document.getElementById('pageTitle').textContent=titles[id]||id;
}

// RENDER
function render(){ renderDevicesGrid();renderQuickDevices();renderOverviewSensors();renderAllSensors();renderAlerts();renderOverviewAlerts();renderLogs();renderSchedules();updateActiveCount(); }
function updateActiveCount(){ document.getElementById('activeDevCount').textContent=devices.filter(d=>d.on).length; }

function renderDevicesGrid(){
  document.getElementById('devicesGrid').innerHTML=devices.map(d=>`
    <div class="dev-card ${d.on?'on':''}" onclick="toggleDev(${d.id})">
      <div class="dev-top">
        <div class="dev-emoji">${d.emoji}</div>
        <div class="tog ${d.on?'on':''}" onclick="event.stopPropagation();toggleDev(${d.id})"><div class="tog-thumb"></div></div>
      </div>
      <div class="dev-name">${d.name}</div>
      <div class="dev-status ${d.on?'on':''}">${d.on?'ON ¬∑ '+d.status:'OFF'}</div>
      <div style="font-size:10px;color:var(--muted);margin-top:3px">üìç ${d.pin}</div>
      ${d.hasSlider&&d.on?`
      <div class="dev-slider" onclick="event.stopPropagation()">
        <div class="slider-row"><span>${d.sliderLabel}</span><span id="dsval-${d.id}">${d.sliderVal}${d.istemp?'¬∞C':'%'}</span></div>
        <input type="range" min="${d.istemp?16:0}" max="${d.istemp?30:100}" value="${d.sliderVal}" oninput="updateSlider(${d.id},this.value)">
      </div>`:''}
    </div>`).join('');
}

function renderQuickDevices(){
  const el=document.getElementById('quickDevices'); if(!el) return;
  el.innerHTML=devices.slice(0,5).map(d=>`
    <div style="display:flex;align-items:center;gap:12px;padding:12px 14px;background:var(--card2);border-radius:12px;border:1px solid var(--border)">
      <span style="font-size:18px">${d.emoji}</span>
      <div style="flex:1"><div style="font-size:13px;font-weight:600">${d.name}</div><div style="font-size:11px;color:${d.on?'var(--green)':'var(--muted)'}">${d.on?'ON':'OFF'}</div></div>
      <div class="tog ${d.on?'on':''}" onclick="toggleDev(${d.id});renderQuickDevices()"><div class="tog-thumb"></div></div>
    </div>`).join('');
}

function renderOverviewSensors(){
  const el=document.getElementById('overviewSensors'); if(!el) return;
  el.innerHTML=sensors.slice(0,4).map(s=>`
    <div class="sensor-card">
      <div class="sensor-top"><span>${s.emoji}</span><span class="status-badge ${s.status}">Safe</span></div>
      <div class="sensor-lbl">${s.name}</div><div class="sensor-val">${s.val}</div><div class="sensor-unit">${s.unit}</div>
    </div>`).join('');
}

function renderAllSensors(){
  const el=document.getElementById('allSensors'); if(!el) return;
  el.innerHTML=sensors.map(s=>`
    <div class="sensor-card">
      <div class="sensor-top"><span style="font-size:26px">${s.emoji}</span><span class="status-badge ${s.status}">Safe</span></div>
      <div class="sensor-lbl" style="margin-bottom:8px">${s.name}</div><div class="sensor-val">${s.val}</div><div class="sensor-unit">${s.unit}</div>
    </div>`).join('');
}

function renderAlerts(){
  const el=document.getElementById('alertsList'); if(!el) return;
  el.innerHTML=alerts.map(a=>`
    <div class="alert-item ${a.type} ${a.read?'':'unread'}" id="alert-${a.id}">
      <div class="alert-icon">${a.type==='danger'?'üî¥':a.type==='warn'?'üü°':'üü¢'}</div>
      <div class="alert-body"><div class="alert-title">${a.title}</div><div class="alert-time">üïê ${a.time}</div></div>
      ${!a.read?`<button class="mark-btn" onclick="markRead(${a.id})">Mark Read</button>`:''}
    </div>`).join('');
  const u=alerts.filter(a=>!a.read).length;
  const b=document.getElementById('alertBadge'); b.textContent=u||''; b.style.display=u?'block':'none';
}

function renderOverviewAlerts(){
  const el=document.getElementById('overviewAlerts'); if(!el) return;
  el.innerHTML=alerts.slice(0,3).map(a=>`
    <div class="alert-item ${a.type} ${a.read?'':'unread'}" style="margin-bottom:8px">
      <div class="alert-icon">${a.type==='danger'?'üî¥':a.type==='warn'?'üü°':'üü¢'}</div>
      <div class="alert-body"><div class="alert-title">${a.title}</div><div class="alert-time">${a.time}</div></div>
    </div>`).join('');
}

function renderLogs(){
  const el=document.getElementById('logsBody'); if(!el) return;
  el.innerHTML=logs.map(l=>`
    <tr>
      <td style="color:var(--muted)">${l.time}</td>
      <td><span class="log-type ${l.type}">${l.type}</span></td>
      <td>${l.device}</td><td>${l.action}</td>
      <td style="color:var(--muted)">${l.user}</td>
    </tr>`).join('');
}

function renderSchedules(){
  const el=document.getElementById('scheduleList'); if(!el) return;
  el.innerHTML=schedules.map((s,i)=>`
    <div class="schedule-item">
      <div class="sched-time">${s.time}</div>
      <div class="sched-info">
        <div class="sched-name">${s.device}</div>
        <div class="sched-days">üìÖ ${s.days}</div>
        <div class="sched-action">‚Üí ${s.action}</div>
      </div>
      <div class="tog ${s.on?'on':''}" onclick="toggleSched(${i})"><div class="tog-thumb"></div></div>
    </div>`).join('');
}

// ACTIONS
function toggleDev(id){
  devices[id].on=!devices[id].on; renderDevicesGrid(); renderQuickDevices(); updateActiveCount();
  logs.unshift({time:new Date().toLocaleTimeString(),type:'control',device:devices[id].name,action:devices[id].on?'Turned on':'Turned off',user:'admin'});
  renderLogs();
}
function updateSlider(id,val){ devices[id].sliderVal=parseInt(val); const el=document.getElementById('dsval-'+id); if(el) el.textContent=val+(devices[id].istemp?'¬∞C':'%'); }
function allOff(){ devices.forEach(d=>d.on=false); renderDevicesGrid(); renderQuickDevices(); updateActiveCount(); }
function markRead(id){ alerts[id].read=true; renderAlerts(); renderOverviewAlerts(); }
function markAllRead(){ alerts.forEach(a=>a.read=true); renderAlerts(); renderOverviewAlerts(); }
function toggleSched(i){ schedules[i].on=!schedules[i].on; renderSchedules(); }
function addSchedule(){
  schedules.unshift({time:document.getElementById('sTime').value,device:document.getElementById('sDevice').value,action:document.getElementById('sAction').value,days:document.getElementById('sDays').value,on:true});
  renderSchedules();
}

let doorLocked=true;
function openDoor(){
  const btn=document.getElementById('doorBtn'); doorLocked=!doorLocked;
  if(doorLocked){
    btn.textContent='üîì Unlock Door'; btn.style.background='linear-gradient(135deg,var(--accent),var(--accent2))';
    document.getElementById('doorStatusTxt').textContent='üîê Locked ‚Äî Secure'; document.getElementById('doorStatusTxt').style.color='var(--green)';
    document.getElementById('doorBadge').textContent='Locked'; document.getElementById('doorBadge').className='status-badge ok';
  } else {
    btn.textContent='üîí Lock Door'; btn.style.background='linear-gradient(135deg,var(--orange),var(--red))';
    document.getElementById('doorStatusTxt').textContent='üîì Unlocked'; document.getElementById('doorStatusTxt').style.color='var(--orange)';
    document.getElementById('doorBadge').textContent='Unlocked'; document.getElementById('doorBadge').className='status-badge warn';
  }
  logs.unshift({time:new Date().toLocaleTimeString(),type:'access',device:'Door Lock',action:doorLocked?'Locked':'Unlocked',user:'admin'}); renderLogs();
}

function takeSS(e){
  const btn=e.target; btn.textContent='‚è≥ Saving...';
  setTimeout(()=>{ btn.textContent='‚úÖ Saved!'; setTimeout(()=>btn.textContent='üì∏ Snapshot',1500); },800);
  logs.unshift({time:new Date().toLocaleTimeString(),type:'access',device:'ESP32-CAM',action:'Snapshot captured',user:'admin'}); renderLogs();
}

// Live sensor simulation (MQTT updates)
setInterval(()=>{
  if(document.getElementById('page-monitoring').classList.contains('active')) renderAllSensors();
  if(document.getElementById('page-overview').classList.contains('active')) renderOverviewSensors();
},3000);
</script>
</body>
</html>
